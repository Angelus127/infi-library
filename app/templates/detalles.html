{% extends 'base.html' %}
{% block title %}{{ item.title }}{% endblock %}

{% block content %}
  <div class="detalle">
    <h1>{{ item.title }}</h1>

    <!-- PUNTUACION (DETALLES) -->
    <div class="puntuacion-contenedor">
      <label for="sliderScore"><strong>Puntuación:</strong></label>
      <div style="display:flex; align-items:center; gap:12px;">
        <input
          id="sliderScore"
          class="sliderPuntuacion"
          type="range"
          min="1.0"
          max="9.9"
          step="0.1"
          value="{{ '%.1f'|format(item.score) if item.score is not none else '1.0' }}"
          data-tipo="{{ tipo }}"
          data-item-id="{{ item.id }}"
        >
        <div class="valor-puntuacion">{{ '%.1f'|format(item.score) if item.score is not none else '1.0' }}</div>
      </div>
    </div>


    {% if item.score %}<p><strong>Puntaje:</strong> {{ item.score }}</p>{% endif %}
    {% if item.year %}<p><strong>Año:</strong> {{ item.year }}</p>{% endif %}
    {% if item.type %}<p><strong>Tipo:</strong> {{ item.type }}</p>{% endif %}
    {% if item.country %}<p><strong>Nacionalidad:</strong> {{ item.country }}</p>{% endif %}
    {% if item.collection %}<p><strong>Colección:</strong> {{ item.collection }}</p>{% endif %}
    {% if item.class %}<p><strong>Clase:</strong> {{ item.class }}</p>{% endif %}
    {% if item.description %}<p><strong>Descripción:</strong> {{ item.description }}</p>{% endif %}

    <div class="estado-selector">
      <h3>Estado</h3>
      <div class="estado-botones">
        <form method="post" action="{{ url_for('admin_routes.actualizar_estado', tipo=tipo, item_id=item['id'], nuevo_estado=1) }}">
          <button type="submit" class="estado ongoing {% if item['status'] == 'Ongoing' %}activo{% endif %}">
            ⏳ En curso
          </button>
        </form>
  
        <form method="post" action="{{ url_for('admin_routes.actualizar_estado', tipo=tipo, item_id=item['id'], nuevo_estado=2) }}">
          <button type="submit" class="estado finished {% if item['status'] == 'Finished' %}activo{% endif %}">
            🏁 Terminada
          </button>
        </form>
  
        <form method="post" action="{{ url_for('admin_routes.actualizar_estado', tipo=tipo, item_id=item['id'], nuevo_estado=3) }}">
          <button type="submit" class="estado planned {% if item['status'] == 'Planned' %}activo{% endif %}">
            📅 Planeada
          </button>
        </form>
      </div>
    </div>   
  </div>
  
  <div class="acciones">
    <a class="btn-volver" href="{{ url_for('multimedia_routes.ver_multimedia', tipo=tipo) }}">⬅ Volver a {{ tipo }}</a>
    <a class="btn-editar" href="{{ url_for('admin_routes.editar', tipo=tipo, item_id=item.id) }}">✎ Editar</a>
    <form action="{{ url_for('admin_routes.borrar', tipo=tipo, item_id=item.id) }}" method="post" onsubmit="return confirm('¿Seguro que deseas borrar este elemento?');">
      <button type="submit" class="btn-borrar">🗑️ Borrar</button>
    </form>
  </div>
{% endblock %}

